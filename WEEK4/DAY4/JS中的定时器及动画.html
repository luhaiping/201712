<!DOCTYPE html><html><head><title>JS中的定时器及动画</title><meta charset='utf-8'><link href='https://dn-maxiang.qbox.me/res-min/themes/marxico.css' rel='stylesheet'><style>
.note-content  {font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, Song, sans-serif;}

</style></head><body><div id='preview-contents' class='note-content'>
                        
                    

<h2 id="js中的定时器及动画">JS中的定时器及动画</h2>

<p></p>

<h3 id="一定时器基础语法">一、定时器基础语法</h3>

<blockquote>
  <p>设置一个定时器，并且设定一个等待的时间，当到达时间，执行指定要完成的事情</p>
  
  <ul><li>setTimeout：到达指定时间执行一次方法，定时器结束运行</li>
  <li>setInterval：到达指定时间执行方法，以后每间隔这么长的时间都会把方法执行一遍，直到定时器被手动清除</li>
  </ul>
  
  <p>window.setTimeout([function],[interval]) <br>
  window.setInterval([function],[interval])：[function]到达时间需要执行的方法，[interval]时间因子,设置的等待时间(MS)</p>
</blockquote>

<pre class="prettyprint with-line-number hljs-dark"><code class="language-javascript hljs"><div class="hljs-line"><span class="hljs-comment line-number">1.</span><span class="hljs-keyword">var</span> n=<span class="hljs-number">0</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">2.</span>setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">3.</span>    <span class="hljs-built_in">console</span>.log(++n);<span class="hljs-comment">//=&gt;1000ms后执行方法,输出一次1,此时定时器结束,也就是没用了(但是定时器没有被清除)</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">4.</span>},<span class="hljs-number">1000</span>);
</div><div class="hljs-line"><span class="hljs-comment line-number">5.</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">6.</span><span class="hljs-keyword">var</span> m=<span class="hljs-number">0</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">7.</span>setInterval(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">8.</span>    <span class="hljs-built_in">console</span>.log(++m);<span class="hljs-comment">//=&gt;第一次过了1000MS输出1，以后每间隔1000MS都会输出一次，而且结果是一直累加的：1 2 3 4 5...</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">9.</span>},<span class="hljs-number">1000</span>);
</div></code></pre>



<h4 id="清除定时器">清除定时器</h4>

<blockquote>
  <p>在分析如何清除定时器之前，我们先来研究一下定时器的返回值： <br>
  =&gt; 设置一个定时器，会返回一个数字，这个数字代表当前设置的定时器是页面中的第几个定时器 <br>
  =&gt; 类似于我们去银行办理业务，进门第一件事情就是领取一个排队序号，序号数字代表我们是今天第几个办理业务的，定时器的返回值就是这个序号 <br>
  =&gt; 我们想要清除定时器，我们按照这个序号清除定时器即可</p>
  
  <ul><li>clearTimeout([定时器序号])</li>
  <li>clearInterval([定时器序号])</li>
  </ul>
  
  <p>按照一个序号，把当前页面中的第N个定时器清除掉，不管使用哪一种办法都可以清除指定序号的定时器（例如：使用setTimeout设置的定时器，我们使用clearInterval也可以把它清除掉）</p>
</blockquote>



<pre class="prettyprint with-line-number hljs-dark"><code class="language-javascript hljs"><div class="hljs-line"><span class="hljs-comment line-number">1.</span><span class="hljs-keyword">var</span> timer1=setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">2.</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">3.</span>    <span class="hljs-comment">//clearTimeout(timer1);//=&gt;clearTimeout(1) 只要按照定时器编号清除第N个定时器即可，定时器返回值存储的变量就记录了当前定时器的编号</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">4.</span>    clearInterval(timer1);<span class="hljs-comment">//=&gt;这样也可以清除掉，使用setTimeout设置的定时器，最好在方法结束后，手动把没用的定时器清除掉，优化JS的内存空间</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">5.</span>},<span class="hljs-number">1000</span>);<span class="hljs-comment">//=&gt;timer1===1：说明当前定时器是第一个定时器</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">6.</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">7.</span><span class="hljs-keyword">var</span> n=<span class="hljs-number">0</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">8.</span><span class="hljs-keyword">var</span> timer2=setInterval(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">9.</span>    n++;
</div><div class="hljs-line"><span class="hljs-comment line-number">10.</span>    <span class="hljs-built_in">console</span>.log(n);<span class="hljs-comment">//=&gt;1 2 ... 10</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">11.</span>    <span class="hljs-keyword">if</span>(n===<span class="hljs-number">10</span>){
</div><div class="hljs-line"><span class="hljs-comment line-number">12.</span>        clearInterval(timer2);<span class="hljs-comment">//=&gt;手动清除定时器，执行10次后就不在执行了</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">13.</span>    }
</div><div class="hljs-line"><span class="hljs-comment line-number">14.</span>},<span class="hljs-number">1000</span>);
</div><div class="hljs-line"><span class="hljs-comment line-number">15.</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">16.</span><span class="hljs-comment">//=&gt;timer1:1</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">17.</span><span class="hljs-comment">//=&gt;timer2:2</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">18.</span><span class="hljs-comment">//=&gt;不管是用哪一种办法设置的定时器，在当前页面中隶属编号是累加的（JS中的两种定时器除了一个执行一次，一个执行多次以外，剩下的核心原理是一样的），也和去银行办业务一样，不管当前是存钱还是取钱业务，序号都是依次累加的</span>
</div></code></pre>

<h4 id="定时器的原理">定时器的原理</h4>

<blockquote>
  <p>当我们在JS中创建一个定时器之后，浏览器会把“计时执行方法”的这个任务放在浏览器的<code>等待任务队列(等待任务池)</code>中，并且安排一个小孩(属于浏览器开辟的一个新线程)坐在那数数，也就是一直记录当前已经走的时间，当到达时间后，小孩会通知浏览器时间到了，浏览器把之前放在等待任务队列中的方法拿出来执行</p>
</blockquote>

<h3 id="二js中动画实现的原理">二、JS中动画实现的原理</h3>

<blockquote>
  <p>浏览器中实现动画有三种常用的方法： <br>
  <strong><code>CSS3动画</code></strong> <br>
  在CSS3中提供了<code>transition(过渡动画) / animation(帧动画)</code>两种动画：优势在于性能好，实现起来简单(一般写动画都是能用CSS解决的绝对不用其它方式)，弊端在于不兼容大部分IE或者其它低版本浏览器(移动端的动画一般都是基于CSS3来完成的)</p>
  
  <p><strong><code>JavaScript动画</code></strong> <br>
  在JS中实现动画常用的有： <br>
  =&gt; 使用定时器驱动的动画 <br>
  =&gt; 使用requestAnimationFrame来完成的动画</p>
  
  <p>而所谓的CANVAS动画也基本上是基于这两种方式完成的（canvas本身是绘图）</p>
  
  <p><strong><code>FLASH动画</code></strong> <br>
  非常早的动画处理方案,我们想实现动画,需要把这部分制作成FLASH影片,然后使用Adobe Flash Player插件在浏览器中播放 ；现在一些简单的DOM动画都告别了flash的时代，影片的播放也可以基于H5中的audio或者video完成了，告别了flash的时代；</p>
</blockquote>

<h4 id="基于定时器的动画">基于定时器的动画</h4>

<blockquote>
  <p>基于定时器实现动画有两种解决方案：</p>
  
  <ul><li>固定步长的动画</li>
  <li>固定时间的动画</li>
  </ul>
  
  <p>更常用的是固定时间的动画，我们接下来使用回调顶部这个常用案例，完成我们的动画学习</p>
</blockquote>

<p><code>案例的HTML+CSS</code></p>



<pre class="prettyprint with-line-number hljs-dark"><code class="hljs xml"><div class="hljs-line"><span class="hljs-comment line-number">1.</span><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">2.</span><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">3.</span><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">4.</span>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">5.</span>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>珠峰培训<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">6.</span>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"css/reset.min.css"</span>&gt;</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">7.</span>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
</span></div><div class="hljs-line"><span class="hljs-comment line-number">8.</span>        <span class="hljs-selector-tag">html</span>, <span class="hljs-selector-tag">body</span> {
</div><div class="hljs-line"><span class="hljs-comment line-number">9.</span>            <span class="hljs-attribute">height</span>: <span class="hljs-number">500%</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">10.</span>            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">-webkit-linear-gradient</span>(lightgoldenrodyellow, lightcyan, lightgreen, lightblue, lightcoral, lightpink, lightsalmon);
</div><div class="hljs-line"><span class="hljs-comment line-number">11.</span>        }
</div><div class="hljs-line"><span class="hljs-comment line-number">12.</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">13.</span>        <span class="hljs-selector-class">.link</span> {
</div><div class="hljs-line"><span class="hljs-comment line-number">14.</span>            <span class="hljs-attribute">display</span>: none;
</div><div class="hljs-line"><span class="hljs-comment line-number">15.</span>            <span class="hljs-attribute">position</span>: fixed;
</div><div class="hljs-line"><span class="hljs-comment line-number">16.</span>            <span class="hljs-attribute">bottom</span>: <span class="hljs-number">20px</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">17.</span>            <span class="hljs-attribute">right</span>: <span class="hljs-number">20px</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">18.</span>            <span class="hljs-attribute">z-index</span>: <span class="hljs-number">999</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">19.</span>            <span class="hljs-attribute">width</span>: <span class="hljs-number">50px</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">20.</span>            <span class="hljs-attribute">height</span>: <span class="hljs-number">50px</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">21.</span>            <span class="hljs-attribute">line-height</span>: <span class="hljs-number">25px</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">22.</span>            <span class="hljs-attribute">text-align</span>: center;
</div><div class="hljs-line"><span class="hljs-comment line-number">23.</span>            <span class="hljs-attribute">background</span>: <span class="hljs-number">#999</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">24.</span>            <span class="hljs-attribute">color</span>: <span class="hljs-number">#FFF</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">25.</span>            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">26.</span>        }
</div><div class="hljs-line"><span class="hljs-comment line-number">27.</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">28.</span><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">29.</span><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">30.</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:;"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"link"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"link"</span>&gt;</span>回到顶部<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">31.</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">32.</span><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"js/utils.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">33.</span><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"js/2-1.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">34.</span><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">35.</span><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</div></code></pre>

<p><code>固定步长</code></p>



<pre class="prettyprint with-line-number hljs-dark"><code class="language-javascript hljs"><div class="hljs-line"><span class="hljs-comment line-number">1.</span><span class="hljs-keyword">var</span> link = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'link'</span>);
</div><div class="hljs-line"><span class="hljs-comment line-number">2.</span><span class="hljs-comment">//=&gt;当卷去的高度超过一屏幕再显示LINK,否则隐藏LINK</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">3.</span><span class="hljs-built_in">window</span>.onscroll = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">4.</span>    <span class="hljs-keyword">var</span> curT = utils.winBox(<span class="hljs-string">'scrollTop'</span>),
</div><div class="hljs-line"><span class="hljs-comment line-number">5.</span>        winH = utils.winBox(<span class="hljs-string">'clientHeight'</span>);
</div><div class="hljs-line"><span class="hljs-comment line-number">6.</span>    link.style.display = curT &gt; winH ? <span class="hljs-string">'block'</span> : <span class="hljs-string">'none'</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">7.</span>};
</div><div class="hljs-line"><span class="hljs-comment line-number">8.</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">9.</span><span class="hljs-comment">//=&gt;点击LINK回到顶部</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">10.</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">move</span>(<span class="hljs-params"></span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">11.</span>    <span class="hljs-keyword">var</span> curT = utils.winBox(<span class="hljs-string">'scrollTop'</span>);
</div><div class="hljs-line"><span class="hljs-comment line-number">12.</span>    curT -= <span class="hljs-number">1000</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">13.</span>    <span class="hljs-keyword">if</span> (curT &lt;= <span class="hljs-number">0</span>) {
</div><div class="hljs-line"><span class="hljs-comment line-number">14.</span>        <span class="hljs-comment">//=&gt;动画结束</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">15.</span>        utils.winBox(<span class="hljs-string">'scrollTop'</span>, <span class="hljs-number">0</span>);
</div><div class="hljs-line"><span class="hljs-comment line-number">16.</span>        clearInterval(link.timer);
</div><div class="hljs-line"><span class="hljs-comment line-number">17.</span>        <span class="hljs-keyword">return</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">18.</span>    }
</div><div class="hljs-line"><span class="hljs-comment line-number">19.</span>    utils.winBox(<span class="hljs-string">'scrollTop'</span>, curT);
</div><div class="hljs-line"><span class="hljs-comment line-number">20.</span>}
</div><div class="hljs-line"><span class="hljs-comment line-number">21.</span>link.onclick = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">22.</span>    <span class="hljs-comment">//=&gt;固定步长:首先获取当前的SCROLL-TOP，在此基础上减去固定的步长，以后每间隔一定时间都来重新操作这个操作，一直到SCROLL-TOP已经为0为止</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">23.</span>    link.timer = setInterval(move, <span class="hljs-number">17</span>);<span class="hljs-comment">//=&gt;17MS是一个在各浏览器中实现定时器动画并且性能比较好的时间因子(也有人使用10/13等时间因子)</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">24.</span>};
</div></code></pre>

<p><code>固定时间</code></p>



<pre class="prettyprint with-line-number hljs-dark"><code class="language-javascript hljs"><div class="hljs-line"><span class="hljs-comment line-number">1.</span><span class="hljs-keyword">var</span> link = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'link'</span>);
</div><div class="hljs-line"><span class="hljs-comment line-number">2.</span><span class="hljs-built_in">window</span>.onscroll = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">3.</span>    <span class="hljs-keyword">var</span> curT = utils.winBox(<span class="hljs-string">'scrollTop'</span>),
</div><div class="hljs-line"><span class="hljs-comment line-number">4.</span>        winH = utils.winBox(<span class="hljs-string">'clientHeight'</span>);
</div><div class="hljs-line"><span class="hljs-comment line-number">5.</span>    link.style.display = curT &gt; winH ? <span class="hljs-string">'block'</span> : <span class="hljs-string">'none'</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">6.</span>};
</div><div class="hljs-line"><span class="hljs-comment line-number">7.</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">8.</span><span class="hljs-comment">//=&gt;点击LINK回到顶部</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">9.</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">linear</span>(<span class="hljs-params">t, b, c, d</span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">10.</span>    <span class="hljs-keyword">return</span> t / d * c + b;
</div><div class="hljs-line"><span class="hljs-comment line-number">11.</span>}
</div><div class="hljs-line"><span class="hljs-comment line-number">12.</span>link.onclick = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">13.</span>    <span class="hljs-keyword">var</span> time = <span class="hljs-number">0</span>,
</div><div class="hljs-line"><span class="hljs-comment line-number">14.</span>        duration = <span class="hljs-number">500</span>,
</div><div class="hljs-line"><span class="hljs-comment line-number">15.</span>        begin = utils.winBox(<span class="hljs-string">'scrollTop'</span>),
</div><div class="hljs-line"><span class="hljs-comment line-number">16.</span>        target = <span class="hljs-number">0</span>,
</div><div class="hljs-line"><span class="hljs-comment line-number">17.</span>        change = target - begin;
</div><div class="hljs-line"><span class="hljs-comment line-number">18.</span>    link.timer = setInterval(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">19.</span>        time += <span class="hljs-number">17</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">20.</span>        <span class="hljs-keyword">if</span> (time &gt;= duration) {
</div><div class="hljs-line"><span class="hljs-comment line-number">21.</span>            utils.winBox(<span class="hljs-string">'scrollTop'</span>, target);
</div><div class="hljs-line"><span class="hljs-comment line-number">22.</span>            clearInterval(link.timer);
</div><div class="hljs-line"><span class="hljs-comment line-number">23.</span>            <span class="hljs-keyword">return</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">24.</span>        }
</div><div class="hljs-line"><span class="hljs-comment line-number">25.</span>        <span class="hljs-keyword">var</span> curT = linear(time, begin, change, duration);
</div><div class="hljs-line"><span class="hljs-comment line-number">26.</span>        utils.winBox(<span class="hljs-string">'scrollTop'</span>, curT);
</div><div class="hljs-line"><span class="hljs-comment line-number">27.</span>    }, <span class="hljs-number">17</span>);
</div><div class="hljs-line"><span class="hljs-comment line-number">28.</span>};
</div><div class="hljs-line"><span class="hljs-comment line-number">29.</span><span class="hljs-comment">/*
</span></div><div class="hljs-line"><span class="hljs-comment line-number">30.</span> * 不管是固定时间的还是固定步长的动画,我们都需要计算当前时间元素应该运动到的位置
</div><div class="hljs-line"><span class="hljs-comment line-number">31.</span> * [固定步长的]
</div><div class="hljs-line"><span class="hljs-comment line-number">32.</span> *   只需在当前基础上累加步长,就是当前时间段元素需要运动到的位置
</div><div class="hljs-line"><span class="hljs-comment line-number">33.</span> *
</div><div class="hljs-line"><span class="hljs-comment line-number">34.</span> * [固定时间的]
</div><div class="hljs-line"><span class="hljs-comment line-number">35.</span> *   相对来说比较麻烦一些,需要我们自己来设定一个公式计算
</div><div class="hljs-line"><span class="hljs-comment line-number">36.</span> *
</div><div class="hljs-line"><span class="hljs-comment line-number">37.</span> * time：已经运动的时间
</div><div class="hljs-line"><span class="hljs-comment line-number">38.</span> * begin：起始的位置
</div><div class="hljs-line"><span class="hljs-comment line-number">39.</span> * target：目标位置
</div><div class="hljs-line"><span class="hljs-comment line-number">40.</span> * change：总距离  target-begin
</div><div class="hljs-line"><span class="hljs-comment line-number">41.</span> * duration：总时间
</div><div class="hljs-line"><span class="hljs-comment line-number">42.</span> *
</div><div class="hljs-line"><span class="hljs-comment line-number">43.</span> * 当前元素位置 = change / duration * time + begin
</div><div class="hljs-line"><span class="hljs-comment line-number">44.</span> * 当前元素位置 = time / duration * change + begin
</div><div class="hljs-line"><span class="hljs-comment line-number">45.</span> */
</div></code></pre>

<blockquote>
  <p>上述代码可以实现我们的需求，以后再有类似的动画需求，我们只需要模拟上述的代码完成动画即可；为了凸显OOP思想中的封装特性，我们最好把实现运动的操作封装成一个方法，以后想要实现动画，调取封装的方法即可；</p>
  
  <p>为了让这个方法更加适用，我们最好封装的方法可以支持<code>固定时间的多方向匀速或者非匀速运动</code></p>
</blockquote>

<p><code>如何实现多方向匀速？</code></p>

<blockquote>
  <p>我们实现一个从正中心逐渐放大的DIALOG模态框效果，这个就是多方向匀速运动</p>
</blockquote>



<pre class="prettyprint with-line-number hljs-dark"><code class="hljs xml"><div class="hljs-line"><span class="hljs-comment line-number">1.</span><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">2.</span><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">3.</span><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">4.</span>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">5.</span>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>珠峰培训<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">6.</span>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"css/reset.min.css"</span>&gt;</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">7.</span>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
</span></div><div class="hljs-line"><span class="hljs-comment line-number">8.</span>        <span class="hljs-selector-tag">html</span>, <span class="hljs-selector-tag">body</span> {
</div><div class="hljs-line"><span class="hljs-comment line-number">9.</span>            <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">10.</span>        }
</div><div class="hljs-line"><span class="hljs-comment line-number">11.</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">12.</span>        <span class="hljs-comment">/*--DIALOG--*/</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">13.</span>        <span class="hljs-selector-class">.dialogBg</span> {
</div><div class="hljs-line"><span class="hljs-comment line-number">14.</span>            <span class="hljs-attribute">display</span>: none;
</div><div class="hljs-line"><span class="hljs-comment line-number">15.</span>            <span class="hljs-attribute">position</span>: fixed;
</div><div class="hljs-line"><span class="hljs-comment line-number">16.</span>            <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">17.</span>            <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">18.</span>            <span class="hljs-attribute">z-index</span>: <span class="hljs-number">998</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">19.</span>            <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">20.</span>            <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">21.</span>            <span class="hljs-attribute">background</span>: <span class="hljs-number">#000</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">22.</span>            <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.3</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">23.</span>            <span class="hljs-attribute">filter</span>: <span class="hljs-built_in">alpha</span>(opacity=30);
</div><div class="hljs-line"><span class="hljs-comment line-number">24.</span>        }
</div><div class="hljs-line"><span class="hljs-comment line-number">25.</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">26.</span>        <span class="hljs-selector-class">.dialogBox</span> {
</div><div class="hljs-line"><span class="hljs-comment line-number">27.</span>            <span class="hljs-attribute">display</span>: none;
</div><div class="hljs-line"><span class="hljs-comment line-number">28.</span>            <span class="hljs-attribute">position</span>: fixed;
</div><div class="hljs-line"><span class="hljs-comment line-number">29.</span>            <span class="hljs-attribute">top</span>: <span class="hljs-number">50%</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">30.</span>            <span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">31.</span>            <span class="hljs-attribute">z-index</span>: <span class="hljs-number">999</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">32.</span>            <span class="hljs-comment">/*
</span></div><div class="hljs-line"><span class="hljs-comment line-number">33.</span>            =&gt;目标值:动画显示的目标值
</div><div class="hljs-line"><span class="hljs-comment line-number">34.</span>            margin-top: -250px;
</div><div class="hljs-line"><span class="hljs-comment line-number">35.</span>            margin-left: -200px;
</div><div class="hljs-line"><span class="hljs-comment line-number">36.</span>            width: 400px;
</div><div class="hljs-line"><span class="hljs-comment line-number">37.</span>            height: 500px;*/
</div><div class="hljs-line"><span class="hljs-comment line-number">38.</span>            <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">0</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">39.</span>            <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">0</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">40.</span>            <span class="hljs-attribute">width</span>: <span class="hljs-number">0</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">41.</span>            <span class="hljs-attribute">height</span>: <span class="hljs-number">0</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">42.</span>            <span class="hljs-attribute">background</span>: <span class="hljs-number">#FFF</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">43.</span>            <span class="hljs-attribute">overflow</span>: hidden;
</div><div class="hljs-line"><span class="hljs-comment line-number">44.</span>        }
</div><div class="hljs-line"><span class="hljs-comment line-number">45.</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">46.</span>        <span class="hljs-selector-class">.dialogBox</span> <span class="hljs-selector-tag">h2</span> {
</div><div class="hljs-line"><span class="hljs-comment line-number">47.</span>            <span class="hljs-attribute">line-height</span>: <span class="hljs-number">50px</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">48.</span>            <span class="hljs-attribute">text-align</span>: center;
</div><div class="hljs-line"><span class="hljs-comment line-number">49.</span>            <span class="hljs-attribute">background</span>: <span class="hljs-number">#EEE</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">50.</span>            <span class="hljs-attribute">overflow</span>: hidden;
</div><div class="hljs-line"><span class="hljs-comment line-number">51.</span>        }
</div><div class="hljs-line"><span class="hljs-comment line-number">52.</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">53.</span>        <span class="hljs-selector-class">.dialogBox</span> <span class="hljs-selector-class">.close</span> {
</div><div class="hljs-line"><span class="hljs-comment line-number">54.</span>            <span class="hljs-attribute">display</span>: block;
</div><div class="hljs-line"><span class="hljs-comment line-number">55.</span>            <span class="hljs-attribute">position</span>: absolute;
</div><div class="hljs-line"><span class="hljs-comment line-number">56.</span>            <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">57.</span>            <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">58.</span>            <span class="hljs-attribute">width</span>: <span class="hljs-number">50px</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">59.</span>            <span class="hljs-attribute">height</span>: <span class="hljs-number">50px</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">60.</span>            <span class="hljs-attribute">line-height</span>: <span class="hljs-number">50px</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">61.</span>            <span class="hljs-attribute">text-align</span>: center;
</div><div class="hljs-line"><span class="hljs-comment line-number">62.</span>            <span class="hljs-attribute">background</span>: lightblue;
</div><div class="hljs-line"><span class="hljs-comment line-number">63.</span>            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">24px</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">64.</span>        }
</div><div class="hljs-line"><span class="hljs-comment line-number">65.</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">66.</span><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">67.</span><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">68.</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:;"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"login"</span>&gt;</span>登录<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">69.</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">70.</span><span class="hljs-comment">&lt;!--DIALOG--&gt;</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">71.</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"dialogBg"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"dialogBg"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">72.</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"dialogBox"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"dialogBox"</span>&gt;</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">73.</span>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>模态框DIALOG<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">74.</span>    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:;"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"close"</span>&gt;</span>x<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">75.</span>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"con"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">76.</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">77.</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">78.</span><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"js/utils.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">79.</span><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"js/3-1.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">80.</span><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">81.</span><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</div></code></pre>



<pre class="prettyprint with-line-number hljs-dark"><code class="language-javascript hljs"><div class="hljs-line"><span class="hljs-comment line-number">1.</span><span class="hljs-keyword">var</span> dialogRender = (<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">2.</span>    <span class="hljs-keyword">var</span> dialogBg = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'dialogBg'</span>),
</div><div class="hljs-line"><span class="hljs-comment line-number">3.</span>        dialogBox = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'dialogBox'</span>),
</div><div class="hljs-line"><span class="hljs-comment line-number">4.</span>        close = utils.getElementsByClassName(<span class="hljs-string">'close'</span>, dialogBox)[<span class="hljs-number">0</span>];
</div><div class="hljs-line"><span class="hljs-comment line-number">5.</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">6.</span>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">closeDialog</span>(<span class="hljs-params"></span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">7.</span>        close.onclick = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">8.</span>            utils.css(dialogBg, <span class="hljs-string">'display'</span>, <span class="hljs-string">'none'</span>);
</div><div class="hljs-line"><span class="hljs-comment line-number">9.</span>            utils.css(dialogBox, {
</div><div class="hljs-line"><span class="hljs-comment line-number">10.</span>                <span class="hljs-attr">display</span>: <span class="hljs-string">'none'</span>,
</div><div class="hljs-line"><span class="hljs-comment line-number">11.</span>                <span class="hljs-attr">width</span>: <span class="hljs-number">0</span>,
</div><div class="hljs-line"><span class="hljs-comment line-number">12.</span>                <span class="hljs-attr">height</span>: <span class="hljs-number">0</span>,
</div><div class="hljs-line"><span class="hljs-comment line-number">13.</span>                <span class="hljs-attr">marginTop</span>: <span class="hljs-number">0</span>,
</div><div class="hljs-line"><span class="hljs-comment line-number">14.</span>                <span class="hljs-attr">marginLeft</span>: <span class="hljs-number">0</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">15.</span>            });
</div><div class="hljs-line"><span class="hljs-comment line-number">16.</span>        }
</div><div class="hljs-line"><span class="hljs-comment line-number">17.</span>    }
</div><div class="hljs-line"><span class="hljs-comment line-number">18.</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">19.</span>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">moveDialog</span>(<span class="hljs-params"></span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">20.</span>        <span class="hljs-comment">//=&gt;准备数据:T/B/C/D</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">21.</span>        <span class="hljs-keyword">var</span> time = <span class="hljs-number">0</span>,
</div><div class="hljs-line"><span class="hljs-comment line-number">22.</span>            duration = <span class="hljs-number">200</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">23.</span>        <span class="hljs-keyword">var</span> begin = {},
</div><div class="hljs-line"><span class="hljs-comment line-number">24.</span>            change = {},
</div><div class="hljs-line"><span class="hljs-comment line-number">25.</span>            target = {
</div><div class="hljs-line"><span class="hljs-comment line-number">26.</span>                <span class="hljs-attr">width</span>: <span class="hljs-number">400</span>,
</div><div class="hljs-line"><span class="hljs-comment line-number">27.</span>                <span class="hljs-attr">height</span>: <span class="hljs-number">500</span>,
</div><div class="hljs-line"><span class="hljs-comment line-number">28.</span>                <span class="hljs-attr">marginTop</span>: <span class="hljs-number">-250</span>,
</div><div class="hljs-line"><span class="hljs-comment line-number">29.</span>                <span class="hljs-attr">marginLeft</span>: <span class="hljs-number">-200</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">30.</span>            };
</div><div class="hljs-line"><span class="hljs-comment line-number">31.</span>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> target) {
</div><div class="hljs-line"><span class="hljs-comment line-number">32.</span>            <span class="hljs-keyword">if</span> (target.hasOwnProperty(key)) {
</div><div class="hljs-line"><span class="hljs-comment line-number">33.</span>                begin[key] = utils.css(dialogBox, key);
</div><div class="hljs-line"><span class="hljs-comment line-number">34.</span>                change[key] = target[key] - begin[key];
</div><div class="hljs-line"><span class="hljs-comment line-number">35.</span>            }
</div><div class="hljs-line"><span class="hljs-comment line-number">36.</span>        }
</div><div class="hljs-line"><span class="hljs-comment line-number">37.</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">38.</span>        <span class="hljs-comment">//=&gt;开始运动</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">39.</span>        dialogBox.moveTimer = setInterval(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">40.</span>            time += <span class="hljs-number">17</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">41.</span>            <span class="hljs-keyword">if</span> (time &gt;= duration) {
</div><div class="hljs-line"><span class="hljs-comment line-number">42.</span>                utils.css(dialogBox, target);
</div><div class="hljs-line"><span class="hljs-comment line-number">43.</span>                clearInterval(dialogBox.moveTimer);
</div><div class="hljs-line"><span class="hljs-comment line-number">44.</span>                <span class="hljs-keyword">return</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">45.</span>            }
</div><div class="hljs-line"><span class="hljs-comment line-number">46.</span>            <span class="hljs-keyword">var</span> curPos = {};
</div><div class="hljs-line"><span class="hljs-comment line-number">47.</span>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> target) {
</div><div class="hljs-line"><span class="hljs-comment line-number">48.</span>                <span class="hljs-keyword">if</span> (target.hasOwnProperty(key)) {
</div><div class="hljs-line"><span class="hljs-comment line-number">49.</span>                    curPos[key] = time / duration * change[key] + begin[key];
</div><div class="hljs-line"><span class="hljs-comment line-number">50.</span>                }
</div><div class="hljs-line"><span class="hljs-comment line-number">51.</span>            }
</div><div class="hljs-line"><span class="hljs-comment line-number">52.</span>            utils.css(dialogBox, curPos);
</div><div class="hljs-line"><span class="hljs-comment line-number">53.</span>        }, <span class="hljs-number">17</span>);
</div><div class="hljs-line"><span class="hljs-comment line-number">54.</span>    }
</div><div class="hljs-line"><span class="hljs-comment line-number">55.</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">56.</span>    <span class="hljs-keyword">return</span> {
</div><div class="hljs-line"><span class="hljs-comment line-number">57.</span>        <span class="hljs-attr">init</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">58.</span>            <span class="hljs-comment">//=&gt;控制显示</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">59.</span>            utils.css(dialogBg, <span class="hljs-string">'display'</span>, <span class="hljs-string">'block'</span>);
</div><div class="hljs-line"><span class="hljs-comment line-number">60.</span>            utils.css(dialogBox, <span class="hljs-string">'display'</span>, <span class="hljs-string">'block'</span>);
</div><div class="hljs-line"><span class="hljs-comment line-number">61.</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">62.</span>            <span class="hljs-comment">//=&gt;DIALOG-BOX需要有动画的效果:从宽高为零变为我们的目标值(固定时间:500MS)</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">63.</span>            moveDialog();
</div><div class="hljs-line"><span class="hljs-comment line-number">64.</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">65.</span>            <span class="hljs-comment">//=&gt;控制隐藏</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">66.</span>            closeDialog();
</div><div class="hljs-line"><span class="hljs-comment line-number">67.</span>        }
</div><div class="hljs-line"><span class="hljs-comment line-number">68.</span>    }
</div><div class="hljs-line"><span class="hljs-comment line-number">69.</span>})();
</div><div class="hljs-line"><span class="hljs-comment line-number">70.</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">71.</span><span class="hljs-comment">//=&gt;点击登录按钮显示DIALOG</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">72.</span><span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'login'</span>).onclick = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">73.</span>    dialogRender.init();
</div><div class="hljs-line"><span class="hljs-comment line-number">74.</span>};
</div></code></pre>

<blockquote>
  <p>所谓多方向匀速运动，其实就是基于单方向匀速运动的原理，把每一个方向的 起始位置、目标值、总距离 都获取到，然后计算出每一个方向的 当前位置 即可</p>
</blockquote>

<p><code>如何实现非匀速运动</code></p>

<blockquote>
  <p>匀速运动是基于一个公式来完成的，非匀速运动也是基于一个个的公式来完成的</p>
  
  <p>下面分享一个珠峰培训自主封装的TWEEN算法运动公式，可以实现很多非匀速运动的效果 <br>
  <a href="http://old.zhufengpeixun.cn/tween/" target="_blank">http://old.zhufengpeixun.cn/tween/</a></p>
</blockquote>

<p><code>回调函数</code></p>

<blockquote>
  <p>把一个函数作为值传递给另外一个函数，在另外一个函数中把当前函数执行</p>
</blockquote>



<pre class="prettyprint with-line-number hljs-dark"><code class="language-javascript hljs"><div class="hljs-line"><span class="hljs-comment line-number">1.</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fn</span>(<span class="hljs-params">callBack</span>)</span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">2.</span>    <span class="hljs-comment">//=&gt;callBack:function(){}</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">3.</span>    callBack();
</div><div class="hljs-line"><span class="hljs-comment line-number">4.</span>}
</div><div class="hljs-line"><span class="hljs-comment line-number">5.</span>fn(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{});
</div><div class="hljs-line"><span class="hljs-comment line-number">6.</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">7.</span><span class="hljs-comment">//=&gt;之前学过的知识中有很多的回调函数</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">8.</span>ary.sort(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">a,b</span>)</span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">9.</span>    <span class="hljs-keyword">return</span> a-b;
</div><div class="hljs-line"><span class="hljs-comment line-number">10.</span>});<span class="hljs-comment">//=&gt;把匿名的回调函数作为值传递给SORT,在执行SORT的时候把传递的匿名函数执行</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">11.</span>ary.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{});
</div><div class="hljs-line"><span class="hljs-comment line-number">12.</span>ary.map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{});
</div><div class="hljs-line"><span class="hljs-comment line-number">13.</span>str.replace(reg,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{});
</div><div class="hljs-line"><span class="hljs-comment line-number">14.</span><span class="hljs-built_in">window</span>.setInterval(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{},<span class="hljs-number">1000</span>);
</div><div class="hljs-line"><span class="hljs-comment line-number">15.</span><span class="hljs-comment">//=&gt;很多的回掉函数机制,而且回调函数机制非常重要</span>
</div></code></pre>

<blockquote>
  <p>凡是在当前方法执行的某个阶段，需要做一些额外的事情（而且这个事情是不固定的，具体做什么不知道），此时我们就可以利用回调函数机制，把要做的事情当做值传递给当前的函数，在当前函数的某个阶段把传递的函数执行即可</p>
</blockquote>

<p><strong><code>封装一个固定时间内支持多方向非匀速运动的动画库</code></strong></p>

<pre class="prettyprint with-line-number hljs-dark"><code class="language-javascript hljs"><div class="hljs-line"><span class="hljs-comment line-number">1.</span>~<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">2.</span>    <span class="hljs-comment">/*
</span></div><div class="hljs-line"><span class="hljs-comment line-number">3.</span>     * 为了保证当前ANIMATE的独立运作,我们把需要使用的一些工具方法提前在这里设定好
</div><div class="hljs-line"><span class="hljs-comment line-number">4.</span>     */
</div><div class="hljs-line"><span class="hljs-comment line-number">5.</span>    <span class="hljs-keyword">var</span> utils = (<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">6.</span>        <span class="hljs-keyword">var</span> isCompatible = <span class="hljs-string">'getElementsByClassName'</span> <span class="hljs-keyword">in</span> <span class="hljs-built_in">document</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">7.</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">8.</span>        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getCss</span>(<span class="hljs-params">curEle, attr</span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">9.</span>            <span class="hljs-keyword">var</span> value = <span class="hljs-literal">null</span>, reg = <span class="hljs-literal">null</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">10.</span>            <span class="hljs-keyword">if</span> (isCompatible) {
</div><div class="hljs-line"><span class="hljs-comment line-number">11.</span>                value = <span class="hljs-built_in">window</span>.getComputedStyle(curEle, <span class="hljs-literal">null</span>)[attr];
</div><div class="hljs-line"><span class="hljs-comment line-number">12.</span>            } <span class="hljs-keyword">else</span> {
</div><div class="hljs-line"><span class="hljs-comment line-number">13.</span>                <span class="hljs-keyword">if</span> (attr === <span class="hljs-string">'opacity'</span>) {
</div><div class="hljs-line"><span class="hljs-comment line-number">14.</span>                    value = curEle.currentStyle[<span class="hljs-string">'filter'</span>];
</div><div class="hljs-line"><span class="hljs-comment line-number">15.</span>                    reg = <span class="hljs-regexp">/^alpha\(opacity=(.+)\)$/i</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">16.</span>                    <span class="hljs-keyword">return</span> reg.test(value) ? reg.exec(value)[<span class="hljs-number">1</span>] / <span class="hljs-number">100</span> : <span class="hljs-number">1</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">17.</span>                }
</div><div class="hljs-line"><span class="hljs-comment line-number">18.</span>                value = curEle.currentStyle[attr];
</div><div class="hljs-line"><span class="hljs-comment line-number">19.</span>            }
</div><div class="hljs-line"><span class="hljs-comment line-number">20.</span>            reg = <span class="hljs-regexp">/^-?\d+(.\d+)?(pt|px|rem|em)?$/i</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">21.</span>            <span class="hljs-keyword">return</span> reg.test(value) ? <span class="hljs-built_in">parseFloat</span>(value) : value;
</div><div class="hljs-line"><span class="hljs-comment line-number">22.</span>        }
</div><div class="hljs-line"><span class="hljs-comment line-number">23.</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">24.</span>        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setCss</span>(<span class="hljs-params">curEle, attr, value</span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">25.</span>            <span class="hljs-keyword">if</span> (attr === <span class="hljs-string">'opacity'</span>) {
</div><div class="hljs-line"><span class="hljs-comment line-number">26.</span>                curEle.style.opacity = value;
</div><div class="hljs-line"><span class="hljs-comment line-number">27.</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">28.</span>                curEle.style.filter = <span class="hljs-string">'alpha(opacity='</span> + value * <span class="hljs-number">100</span> + <span class="hljs-string">')'</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">29.</span>                <span class="hljs-keyword">return</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">30.</span>            }
</div><div class="hljs-line"><span class="hljs-comment line-number">31.</span>            !<span class="hljs-built_in">isNaN</span>(value) &amp;&amp; !<span class="hljs-regexp">/(fontWeight|lineHeight|zoom|zIndex)/i</span>.test(attr) ? value += <span class="hljs-string">'px'</span> : <span class="hljs-literal">null</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">32.</span>            curEle.style[attr] = value;
</div><div class="hljs-line"><span class="hljs-comment line-number">33.</span>        }
</div><div class="hljs-line"><span class="hljs-comment line-number">34.</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">35.</span>        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setGroupCss</span>(<span class="hljs-params">curEle, options</span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">36.</span>            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Object</span>.prototype.toString.call(options) !== <span class="hljs-string">'[object Object]'</span>) <span class="hljs-keyword">return</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">37.</span>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> attr <span class="hljs-keyword">in</span> options) {
</div><div class="hljs-line"><span class="hljs-comment line-number">38.</span>                <span class="hljs-keyword">if</span> (options.hasOwnProperty(attr)) {
</div><div class="hljs-line"><span class="hljs-comment line-number">39.</span>                    setCss(curEle, attr, options[attr])
</div><div class="hljs-line"><span class="hljs-comment line-number">40.</span>                }
</div><div class="hljs-line"><span class="hljs-comment line-number">41.</span>            }
</div><div class="hljs-line"><span class="hljs-comment line-number">42.</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">43.</span>        }
</div><div class="hljs-line"><span class="hljs-comment line-number">44.</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">45.</span>        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">css</span>(<span class="hljs-params"></span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">46.</span>            <span class="hljs-keyword">var</span> len = <span class="hljs-built_in">arguments</span>.length,
</div><div class="hljs-line"><span class="hljs-comment line-number">47.</span>                type = <span class="hljs-built_in">Object</span>.prototype.toString.call(<span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>]),
</div><div class="hljs-line"><span class="hljs-comment line-number">48.</span>                fn = getCss;
</div><div class="hljs-line"><span class="hljs-comment line-number">49.</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">50.</span>            len &gt;= <span class="hljs-number">3</span> ? fn = setCss : (len === <span class="hljs-number">2</span> &amp;&amp; type === <span class="hljs-string">'[object Object]'</span> ? fn = setGroupCss : <span class="hljs-literal">null</span>)
</div><div class="hljs-line"><span class="hljs-comment line-number">51.</span>            <span class="hljs-keyword">return</span> fn.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
</div><div class="hljs-line"><span class="hljs-comment line-number">52.</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">53.</span>        }
</div><div class="hljs-line"><span class="hljs-comment line-number">54.</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">55.</span>        <span class="hljs-keyword">return</span> {
</div><div class="hljs-line"><span class="hljs-comment line-number">56.</span>            <span class="hljs-attr">css</span>: css
</div><div class="hljs-line"><span class="hljs-comment line-number">57.</span>        }
</div><div class="hljs-line"><span class="hljs-comment line-number">58.</span>    })();
</div><div class="hljs-line"><span class="hljs-comment line-number">59.</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">60.</span>    <span class="hljs-comment">/*
</span></div><div class="hljs-line"><span class="hljs-comment line-number">61.</span>     * 运动公式:支持匀速和非匀速
</div><div class="hljs-line"><span class="hljs-comment line-number">62.</span>     *  t：time当前运动的时间
</div><div class="hljs-line"><span class="hljs-comment line-number">63.</span>     *  b：begin当前方向的起始位置
</div><div class="hljs-line"><span class="hljs-comment line-number">64.</span>     *  c：change当前方向的距离
</div><div class="hljs-line"><span class="hljs-comment line-number">65.</span>     *  d：duration当前运动的总时间
</div><div class="hljs-line"><span class="hljs-comment line-number">66.</span>     */
</div><div class="hljs-line"><span class="hljs-comment line-number">67.</span>    <span class="hljs-keyword">var</span> animationEffect = {
</div><div class="hljs-line"><span class="hljs-comment line-number">68.</span>        <span class="hljs-attr">Linear</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">69.</span>            <span class="hljs-keyword">return</span> c * t / d + b;
</div><div class="hljs-line"><span class="hljs-comment line-number">70.</span>        },
</div><div class="hljs-line"><span class="hljs-comment line-number">71.</span>        <span class="hljs-attr">Bounce</span>: {
</div><div class="hljs-line"><span class="hljs-comment line-number">72.</span>            <span class="hljs-attr">easeIn</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">73.</span>                <span class="hljs-keyword">return</span> c - animationEffect.Bounce.easeOut(d - t, <span class="hljs-number">0</span>, c, d) + b;
</div><div class="hljs-line"><span class="hljs-comment line-number">74.</span>            },
</div><div class="hljs-line"><span class="hljs-comment line-number">75.</span>            <span class="hljs-attr">easeOut</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">76.</span>                <span class="hljs-keyword">if</span> ((t /= d) &lt; (<span class="hljs-number">1</span> / <span class="hljs-number">2.75</span>)) {
</div><div class="hljs-line"><span class="hljs-comment line-number">77.</span>                    <span class="hljs-keyword">return</span> c * (<span class="hljs-number">7.5625</span> * t * t) + b;
</div><div class="hljs-line"><span class="hljs-comment line-number">78.</span>                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (t &lt; (<span class="hljs-number">2</span> / <span class="hljs-number">2.75</span>)) {
</div><div class="hljs-line"><span class="hljs-comment line-number">79.</span>                    <span class="hljs-keyword">return</span> c * (<span class="hljs-number">7.5625</span> * (t -= (<span class="hljs-number">1.5</span> / <span class="hljs-number">2.75</span>)) * t + <span class="hljs-number">.75</span>) + b;
</div><div class="hljs-line"><span class="hljs-comment line-number">80.</span>                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (t &lt; (<span class="hljs-number">2.5</span> / <span class="hljs-number">2.75</span>)) {
</div><div class="hljs-line"><span class="hljs-comment line-number">81.</span>                    <span class="hljs-keyword">return</span> c * (<span class="hljs-number">7.5625</span> * (t -= (<span class="hljs-number">2.25</span> / <span class="hljs-number">2.75</span>)) * t + <span class="hljs-number">.9375</span>) + b;
</div><div class="hljs-line"><span class="hljs-comment line-number">82.</span>                } <span class="hljs-keyword">else</span> {
</div><div class="hljs-line"><span class="hljs-comment line-number">83.</span>                    <span class="hljs-keyword">return</span> c * (<span class="hljs-number">7.5625</span> * (t -= (<span class="hljs-number">2.625</span> / <span class="hljs-number">2.75</span>)) * t + <span class="hljs-number">.984375</span>) + b;
</div><div class="hljs-line"><span class="hljs-comment line-number">84.</span>                }
</div><div class="hljs-line"><span class="hljs-comment line-number">85.</span>            },
</div><div class="hljs-line"><span class="hljs-comment line-number">86.</span>            <span class="hljs-attr">easeInOut</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">87.</span>                <span class="hljs-keyword">if</span> (t &lt; d / <span class="hljs-number">2</span>) {
</div><div class="hljs-line"><span class="hljs-comment line-number">88.</span>                    <span class="hljs-keyword">return</span> animationEffect.Bounce.easeIn(t * <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, c, d) * <span class="hljs-number">.5</span> + b;
</div><div class="hljs-line"><span class="hljs-comment line-number">89.</span>                }
</div><div class="hljs-line"><span class="hljs-comment line-number">90.</span>                <span class="hljs-keyword">return</span> animationEffect.Bounce.easeOut(t * <span class="hljs-number">2</span> - d, <span class="hljs-number">0</span>, c, d) * <span class="hljs-number">.5</span> + c * <span class="hljs-number">.5</span> + b;
</div><div class="hljs-line"><span class="hljs-comment line-number">91.</span>            }
</div><div class="hljs-line"><span class="hljs-comment line-number">92.</span>        },
</div><div class="hljs-line"><span class="hljs-comment line-number">93.</span>        <span class="hljs-attr">Quad</span>: {
</div><div class="hljs-line"><span class="hljs-comment line-number">94.</span>            <span class="hljs-attr">easeIn</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">95.</span>                <span class="hljs-keyword">return</span> c * (t /= d) * t + b;
</div><div class="hljs-line"><span class="hljs-comment line-number">96.</span>            },
</div><div class="hljs-line"><span class="hljs-comment line-number">97.</span>            <span class="hljs-attr">easeOut</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">98.</span>                <span class="hljs-keyword">return</span> -c * (t /= d) * (t - <span class="hljs-number">2</span>) + b;
</div><div class="hljs-line"><span class="hljs-comment line-number">99.</span>            },
</div><div class="hljs-line"><span class="hljs-comment line-number">100.</span>            <span class="hljs-attr">easeInOut</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">101.</span>                <span class="hljs-keyword">if</span> ((t /= d / <span class="hljs-number">2</span>) &lt; <span class="hljs-number">1</span>) {
</div><div class="hljs-line"><span class="hljs-comment line-number">102.</span>                    <span class="hljs-keyword">return</span> c / <span class="hljs-number">2</span> * t * t + b;
</div><div class="hljs-line"><span class="hljs-comment line-number">103.</span>                }
</div><div class="hljs-line"><span class="hljs-comment line-number">104.</span>                <span class="hljs-keyword">return</span> -c / <span class="hljs-number">2</span> * ((--t) * (t - <span class="hljs-number">2</span>) - <span class="hljs-number">1</span>) + b;
</div><div class="hljs-line"><span class="hljs-comment line-number">105.</span>            }
</div><div class="hljs-line"><span class="hljs-comment line-number">106.</span>        },
</div><div class="hljs-line"><span class="hljs-comment line-number">107.</span>        <span class="hljs-attr">Cubic</span>: {
</div><div class="hljs-line"><span class="hljs-comment line-number">108.</span>            <span class="hljs-attr">easeIn</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">109.</span>                <span class="hljs-keyword">return</span> c * (t /= d) * t * t + b;
</div><div class="hljs-line"><span class="hljs-comment line-number">110.</span>            },
</div><div class="hljs-line"><span class="hljs-comment line-number">111.</span>            <span class="hljs-attr">easeOut</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">112.</span>                <span class="hljs-keyword">return</span> c * ((t = t / d - <span class="hljs-number">1</span>) * t * t + <span class="hljs-number">1</span>) + b;
</div><div class="hljs-line"><span class="hljs-comment line-number">113.</span>            },
</div><div class="hljs-line"><span class="hljs-comment line-number">114.</span>            <span class="hljs-attr">easeInOut</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">115.</span>                <span class="hljs-keyword">if</span> ((t /= d / <span class="hljs-number">2</span>) &lt; <span class="hljs-number">1</span>) {
</div><div class="hljs-line"><span class="hljs-comment line-number">116.</span>                    <span class="hljs-keyword">return</span> c / <span class="hljs-number">2</span> * t * t * t + b;
</div><div class="hljs-line"><span class="hljs-comment line-number">117.</span>                }
</div><div class="hljs-line"><span class="hljs-comment line-number">118.</span>                <span class="hljs-keyword">return</span> c / <span class="hljs-number">2</span> * ((t -= <span class="hljs-number">2</span>) * t * t + <span class="hljs-number">2</span>) + b;
</div><div class="hljs-line"><span class="hljs-comment line-number">119.</span>            }
</div><div class="hljs-line"><span class="hljs-comment line-number">120.</span>        },
</div><div class="hljs-line"><span class="hljs-comment line-number">121.</span>        <span class="hljs-attr">Quart</span>: {
</div><div class="hljs-line"><span class="hljs-comment line-number">122.</span>            <span class="hljs-attr">easeIn</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">123.</span>                <span class="hljs-keyword">return</span> c * (t /= d) * t * t * t + b;
</div><div class="hljs-line"><span class="hljs-comment line-number">124.</span>            },
</div><div class="hljs-line"><span class="hljs-comment line-number">125.</span>            <span class="hljs-attr">easeOut</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">126.</span>                <span class="hljs-keyword">return</span> -c * ((t = t / d - <span class="hljs-number">1</span>) * t * t * t - <span class="hljs-number">1</span>) + b;
</div><div class="hljs-line"><span class="hljs-comment line-number">127.</span>            },
</div><div class="hljs-line"><span class="hljs-comment line-number">128.</span>            <span class="hljs-attr">easeInOut</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">129.</span>                <span class="hljs-keyword">if</span> ((t /= d / <span class="hljs-number">2</span>) &lt; <span class="hljs-number">1</span>) {
</div><div class="hljs-line"><span class="hljs-comment line-number">130.</span>                    <span class="hljs-keyword">return</span> c / <span class="hljs-number">2</span> * t * t * t * t + b;
</div><div class="hljs-line"><span class="hljs-comment line-number">131.</span>                }
</div><div class="hljs-line"><span class="hljs-comment line-number">132.</span>                <span class="hljs-keyword">return</span> -c / <span class="hljs-number">2</span> * ((t -= <span class="hljs-number">2</span>) * t * t * t - <span class="hljs-number">2</span>) + b;
</div><div class="hljs-line"><span class="hljs-comment line-number">133.</span>            }
</div><div class="hljs-line"><span class="hljs-comment line-number">134.</span>        },
</div><div class="hljs-line"><span class="hljs-comment line-number">135.</span>        <span class="hljs-attr">Quint</span>: {
</div><div class="hljs-line"><span class="hljs-comment line-number">136.</span>            <span class="hljs-attr">easeIn</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">137.</span>                <span class="hljs-keyword">return</span> c * (t /= d) * t * t * t * t + b;
</div><div class="hljs-line"><span class="hljs-comment line-number">138.</span>            },
</div><div class="hljs-line"><span class="hljs-comment line-number">139.</span>            <span class="hljs-attr">easeOut</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">140.</span>                <span class="hljs-keyword">return</span> c * ((t = t / d - <span class="hljs-number">1</span>) * t * t * t * t + <span class="hljs-number">1</span>) + b;
</div><div class="hljs-line"><span class="hljs-comment line-number">141.</span>            },
</div><div class="hljs-line"><span class="hljs-comment line-number">142.</span>            <span class="hljs-attr">easeInOut</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">143.</span>                <span class="hljs-keyword">if</span> ((t /= d / <span class="hljs-number">2</span>) &lt; <span class="hljs-number">1</span>) {
</div><div class="hljs-line"><span class="hljs-comment line-number">144.</span>                    <span class="hljs-keyword">return</span> c / <span class="hljs-number">2</span> * t * t * t * t * t + b;
</div><div class="hljs-line"><span class="hljs-comment line-number">145.</span>                }
</div><div class="hljs-line"><span class="hljs-comment line-number">146.</span>                <span class="hljs-keyword">return</span> c / <span class="hljs-number">2</span> * ((t -= <span class="hljs-number">2</span>) * t * t * t * t + <span class="hljs-number">2</span>) + b;
</div><div class="hljs-line"><span class="hljs-comment line-number">147.</span>            }
</div><div class="hljs-line"><span class="hljs-comment line-number">148.</span>        },
</div><div class="hljs-line"><span class="hljs-comment line-number">149.</span>        <span class="hljs-attr">Sine</span>: {
</div><div class="hljs-line"><span class="hljs-comment line-number">150.</span>            <span class="hljs-attr">easeIn</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">151.</span>                <span class="hljs-keyword">return</span> -c * <span class="hljs-built_in">Math</span>.cos(t / d * (<span class="hljs-built_in">Math</span>.PI / <span class="hljs-number">2</span>)) + c + b;
</div><div class="hljs-line"><span class="hljs-comment line-number">152.</span>            },
</div><div class="hljs-line"><span class="hljs-comment line-number">153.</span>            <span class="hljs-attr">easeOut</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">154.</span>                <span class="hljs-keyword">return</span> c * <span class="hljs-built_in">Math</span>.sin(t / d * (<span class="hljs-built_in">Math</span>.PI / <span class="hljs-number">2</span>)) + b;
</div><div class="hljs-line"><span class="hljs-comment line-number">155.</span>            },
</div><div class="hljs-line"><span class="hljs-comment line-number">156.</span>            <span class="hljs-attr">easeInOut</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">157.</span>                <span class="hljs-keyword">return</span> -c / <span class="hljs-number">2</span> * (<span class="hljs-built_in">Math</span>.cos(<span class="hljs-built_in">Math</span>.PI * t / d) - <span class="hljs-number">1</span>) + b;
</div><div class="hljs-line"><span class="hljs-comment line-number">158.</span>            }
</div><div class="hljs-line"><span class="hljs-comment line-number">159.</span>        },
</div><div class="hljs-line"><span class="hljs-comment line-number">160.</span>        <span class="hljs-attr">Expo</span>: {
</div><div class="hljs-line"><span class="hljs-comment line-number">161.</span>            <span class="hljs-attr">easeIn</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">162.</span>                <span class="hljs-keyword">return</span> (t == <span class="hljs-number">0</span>) ? b : c * <span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">2</span>, <span class="hljs-number">10</span> * (t / d - <span class="hljs-number">1</span>)) + b;
</div><div class="hljs-line"><span class="hljs-comment line-number">163.</span>            },
</div><div class="hljs-line"><span class="hljs-comment line-number">164.</span>            <span class="hljs-attr">easeOut</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">165.</span>                <span class="hljs-keyword">return</span> (t == d) ? b + c : c * (-<span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">2</span>, <span class="hljs-number">-10</span> * t / d) + <span class="hljs-number">1</span>) + b;
</div><div class="hljs-line"><span class="hljs-comment line-number">166.</span>            },
</div><div class="hljs-line"><span class="hljs-comment line-number">167.</span>            <span class="hljs-attr">easeInOut</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">168.</span>                <span class="hljs-keyword">if</span> (t == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> b;
</div><div class="hljs-line"><span class="hljs-comment line-number">169.</span>                <span class="hljs-keyword">if</span> (t == d) <span class="hljs-keyword">return</span> b + c;
</div><div class="hljs-line"><span class="hljs-comment line-number">170.</span>                <span class="hljs-keyword">if</span> ((t /= d / <span class="hljs-number">2</span>) &lt; <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> c / <span class="hljs-number">2</span> * <span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">2</span>, <span class="hljs-number">10</span> * (t - <span class="hljs-number">1</span>)) + b;
</div><div class="hljs-line"><span class="hljs-comment line-number">171.</span>                <span class="hljs-keyword">return</span> c / <span class="hljs-number">2</span> * (-<span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">2</span>, <span class="hljs-number">-10</span> * --t) + <span class="hljs-number">2</span>) + b;
</div><div class="hljs-line"><span class="hljs-comment line-number">172.</span>            }
</div><div class="hljs-line"><span class="hljs-comment line-number">173.</span>        },
</div><div class="hljs-line"><span class="hljs-comment line-number">174.</span>        <span class="hljs-attr">Circ</span>: {
</div><div class="hljs-line"><span class="hljs-comment line-number">175.</span>            <span class="hljs-attr">easeIn</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">176.</span>                <span class="hljs-keyword">return</span> -c * (<span class="hljs-built_in">Math</span>.sqrt(<span class="hljs-number">1</span> - (t /= d) * t) - <span class="hljs-number">1</span>) + b;
</div><div class="hljs-line"><span class="hljs-comment line-number">177.</span>            },
</div><div class="hljs-line"><span class="hljs-comment line-number">178.</span>            <span class="hljs-attr">easeOut</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">179.</span>                <span class="hljs-keyword">return</span> c * <span class="hljs-built_in">Math</span>.sqrt(<span class="hljs-number">1</span> - (t = t / d - <span class="hljs-number">1</span>) * t) + b;
</div><div class="hljs-line"><span class="hljs-comment line-number">180.</span>            },
</div><div class="hljs-line"><span class="hljs-comment line-number">181.</span>            <span class="hljs-attr">easeInOut</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d</span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">182.</span>                <span class="hljs-keyword">if</span> ((t /= d / <span class="hljs-number">2</span>) &lt; <span class="hljs-number">1</span>) {
</div><div class="hljs-line"><span class="hljs-comment line-number">183.</span>                    <span class="hljs-keyword">return</span> -c / <span class="hljs-number">2</span> * (<span class="hljs-built_in">Math</span>.sqrt(<span class="hljs-number">1</span> - t * t) - <span class="hljs-number">1</span>) + b;
</div><div class="hljs-line"><span class="hljs-comment line-number">184.</span>                }
</div><div class="hljs-line"><span class="hljs-comment line-number">185.</span>                <span class="hljs-keyword">return</span> c / <span class="hljs-number">2</span> * (<span class="hljs-built_in">Math</span>.sqrt(<span class="hljs-number">1</span> - (t -= <span class="hljs-number">2</span>) * t) + <span class="hljs-number">1</span>) + b;
</div><div class="hljs-line"><span class="hljs-comment line-number">186.</span>            }
</div><div class="hljs-line"><span class="hljs-comment line-number">187.</span>        },
</div><div class="hljs-line"><span class="hljs-comment line-number">188.</span>        <span class="hljs-attr">Back</span>: {
</div><div class="hljs-line"><span class="hljs-comment line-number">189.</span>            <span class="hljs-attr">easeIn</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d, s</span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">190.</span>                <span class="hljs-keyword">if</span> (s == <span class="hljs-literal">undefined</span>) s = <span class="hljs-number">1.70158</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">191.</span>                <span class="hljs-keyword">return</span> c * (t /= d) * t * ((s + <span class="hljs-number">1</span>) * t - s) + b;
</div><div class="hljs-line"><span class="hljs-comment line-number">192.</span>            },
</div><div class="hljs-line"><span class="hljs-comment line-number">193.</span>            <span class="hljs-attr">easeOut</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d, s</span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">194.</span>                <span class="hljs-keyword">if</span> (s == <span class="hljs-literal">undefined</span>) s = <span class="hljs-number">1.70158</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">195.</span>                <span class="hljs-keyword">return</span> c * ((t = t / d - <span class="hljs-number">1</span>) * t * ((s + <span class="hljs-number">1</span>) * t + s) + <span class="hljs-number">1</span>) + b;
</div><div class="hljs-line"><span class="hljs-comment line-number">196.</span>            },
</div><div class="hljs-line"><span class="hljs-comment line-number">197.</span>            <span class="hljs-attr">easeInOut</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d, s</span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">198.</span>                <span class="hljs-keyword">if</span> (s == <span class="hljs-literal">undefined</span>) s = <span class="hljs-number">1.70158</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">199.</span>                <span class="hljs-keyword">if</span> ((t /= d / <span class="hljs-number">2</span>) &lt; <span class="hljs-number">1</span>) {
</div><div class="hljs-line"><span class="hljs-comment line-number">200.</span>                    <span class="hljs-keyword">return</span> c / <span class="hljs-number">2</span> * (t * t * (((s *= (<span class="hljs-number">1.525</span>)) + <span class="hljs-number">1</span>) * t - s)) + b;
</div><div class="hljs-line"><span class="hljs-comment line-number">201.</span>                }
</div><div class="hljs-line"><span class="hljs-comment line-number">202.</span>                <span class="hljs-keyword">return</span> c / <span class="hljs-number">2</span> * ((t -= <span class="hljs-number">2</span>) * t * (((s *= (<span class="hljs-number">1.525</span>)) + <span class="hljs-number">1</span>) * t + s) + <span class="hljs-number">2</span>) + b;
</div><div class="hljs-line"><span class="hljs-comment line-number">203.</span>            }
</div><div class="hljs-line"><span class="hljs-comment line-number">204.</span>        },
</div><div class="hljs-line"><span class="hljs-comment line-number">205.</span>        <span class="hljs-attr">Elastic</span>: {
</div><div class="hljs-line"><span class="hljs-comment line-number">206.</span>            <span class="hljs-attr">easeIn</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d, a, p</span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">207.</span>                <span class="hljs-keyword">if</span> (t == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> b;
</div><div class="hljs-line"><span class="hljs-comment line-number">208.</span>                <span class="hljs-keyword">if</span> ((t /= d) == <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> b + c;
</div><div class="hljs-line"><span class="hljs-comment line-number">209.</span>                <span class="hljs-keyword">if</span> (!p) p = d * <span class="hljs-number">.3</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">210.</span>                <span class="hljs-keyword">var</span> s;
</div><div class="hljs-line"><span class="hljs-comment line-number">211.</span>                !a || a &lt; <span class="hljs-built_in">Math</span>.abs(c) ? (a = c, s = p / <span class="hljs-number">4</span>) : s = p / (<span class="hljs-number">2</span> * <span class="hljs-built_in">Math</span>.PI) * <span class="hljs-built_in">Math</span>.asin(c / a);
</div><div class="hljs-line"><span class="hljs-comment line-number">212.</span>                <span class="hljs-keyword">return</span> -(a * <span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">2</span>, <span class="hljs-number">10</span> * (t -= <span class="hljs-number">1</span>)) * <span class="hljs-built_in">Math</span>.sin((t * d - s) * (<span class="hljs-number">2</span> * <span class="hljs-built_in">Math</span>.PI) / p)) + b;
</div><div class="hljs-line"><span class="hljs-comment line-number">213.</span>            },
</div><div class="hljs-line"><span class="hljs-comment line-number">214.</span>            <span class="hljs-attr">easeOut</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d, a, p</span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">215.</span>                <span class="hljs-keyword">if</span> (t == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> b;
</div><div class="hljs-line"><span class="hljs-comment line-number">216.</span>                <span class="hljs-keyword">if</span> ((t /= d) == <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> b + c;
</div><div class="hljs-line"><span class="hljs-comment line-number">217.</span>                <span class="hljs-keyword">if</span> (!p) p = d * <span class="hljs-number">.3</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">218.</span>                <span class="hljs-keyword">var</span> s;
</div><div class="hljs-line"><span class="hljs-comment line-number">219.</span>                !a || a &lt; <span class="hljs-built_in">Math</span>.abs(c) ? (a = c, s = p / <span class="hljs-number">4</span>) : s = p / (<span class="hljs-number">2</span> * <span class="hljs-built_in">Math</span>.PI) * <span class="hljs-built_in">Math</span>.asin(c / a);
</div><div class="hljs-line"><span class="hljs-comment line-number">220.</span>                <span class="hljs-keyword">return</span> (a * <span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">2</span>, <span class="hljs-number">-10</span> * t) * <span class="hljs-built_in">Math</span>.sin((t * d - s) * (<span class="hljs-number">2</span> * <span class="hljs-built_in">Math</span>.PI) / p) + c + b);
</div><div class="hljs-line"><span class="hljs-comment line-number">221.</span>            },
</div><div class="hljs-line"><span class="hljs-comment line-number">222.</span>            <span class="hljs-attr">easeInOut</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, b, c, d, a, p</span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">223.</span>                <span class="hljs-keyword">if</span> (t == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> b;
</div><div class="hljs-line"><span class="hljs-comment line-number">224.</span>                <span class="hljs-keyword">if</span> ((t /= d / <span class="hljs-number">2</span>) == <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> b + c;
</div><div class="hljs-line"><span class="hljs-comment line-number">225.</span>                <span class="hljs-keyword">if</span> (!p) p = d * (<span class="hljs-number">.3</span> * <span class="hljs-number">1.5</span>);
</div><div class="hljs-line"><span class="hljs-comment line-number">226.</span>                <span class="hljs-keyword">var</span> s;
</div><div class="hljs-line"><span class="hljs-comment line-number">227.</span>                !a || a &lt; <span class="hljs-built_in">Math</span>.abs(c) ? (a = c, s = p / <span class="hljs-number">4</span>) : s = p / (<span class="hljs-number">2</span> * <span class="hljs-built_in">Math</span>.PI) * <span class="hljs-built_in">Math</span>.asin(c / a);
</div><div class="hljs-line"><span class="hljs-comment line-number">228.</span>                <span class="hljs-keyword">if</span> (t &lt; <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">-.5</span> * (a * <span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">2</span>, <span class="hljs-number">10</span> * (t -= <span class="hljs-number">1</span>)) * <span class="hljs-built_in">Math</span>.sin((t * d - s) * (<span class="hljs-number">2</span> * <span class="hljs-built_in">Math</span>.PI) / p)) + b;
</div><div class="hljs-line"><span class="hljs-comment line-number">229.</span>                <span class="hljs-keyword">return</span> a * <span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">2</span>, <span class="hljs-number">-10</span> * (t -= <span class="hljs-number">1</span>)) * <span class="hljs-built_in">Math</span>.sin((t * d - s) * (<span class="hljs-number">2</span> * <span class="hljs-built_in">Math</span>.PI) / p) * <span class="hljs-number">.5</span> + c + b;
</div><div class="hljs-line"><span class="hljs-comment line-number">230.</span>            }
</div><div class="hljs-line"><span class="hljs-comment line-number">231.</span>        }
</div><div class="hljs-line"><span class="hljs-comment line-number">232.</span>    };
</div><div class="hljs-line"><span class="hljs-comment line-number">233.</span>    <span class="hljs-built_in">window</span>.animateEffect = animationEffect;
</div><div class="hljs-line"><span class="hljs-comment line-number">234.</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">235.</span>    <span class="hljs-comment">/*
</span></div><div class="hljs-line"><span class="hljs-comment line-number">236.</span>     * animate：支持指定时间内的多方向匀速或者非匀速运动动画库
</div><div class="hljs-line"><span class="hljs-comment line-number">237.</span>     * @parameter
</div><div class="hljs-line"><span class="hljs-comment line-number">238.</span>     *   options.curEle：当前需要运动的元素
</div><div class="hljs-line"><span class="hljs-comment line-number">239.</span>     *   options.target：目标位置信息 {xxx:xxx...}
</div><div class="hljs-line"><span class="hljs-comment line-number">240.</span>     *   options.duration：运动的总时间
</div><div class="hljs-line"><span class="hljs-comment line-number">241.</span>     *   options.effect：运动的方式(匀速或者非匀速:它是一个运动的公式)
</div><div class="hljs-line"><span class="hljs-comment line-number">242.</span>     *   options.callBack：回调函数，当动画运行完成后需要做的事情，当做回调函数传递进来即可
</div><div class="hljs-line"><span class="hljs-comment line-number">243.</span>     */
</div><div class="hljs-line"><span class="hljs-comment line-number">244.</span>    <span class="hljs-built_in">window</span>.animate = animate;
</div><div class="hljs-line"><span class="hljs-comment line-number">245.</span>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">animate</span>(<span class="hljs-params">options</span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">246.</span>        <span class="hljs-comment">//=&gt;init parameter</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">247.</span>        <span class="hljs-keyword">var</span> _default = {
</div><div class="hljs-line"><span class="hljs-comment line-number">248.</span>            <span class="hljs-attr">curEle</span>: <span class="hljs-literal">null</span>,
</div><div class="hljs-line"><span class="hljs-comment line-number">249.</span>            <span class="hljs-attr">target</span>: <span class="hljs-literal">null</span>,
</div><div class="hljs-line"><span class="hljs-comment line-number">250.</span>            <span class="hljs-attr">duration</span>: <span class="hljs-number">1000</span>,
</div><div class="hljs-line"><span class="hljs-comment line-number">251.</span>            <span class="hljs-attr">effect</span>: animationEffect.Linear,
</div><div class="hljs-line"><span class="hljs-comment line-number">252.</span>            <span class="hljs-attr">callBack</span>: <span class="hljs-literal">null</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">253.</span>        };
</div><div class="hljs-line"><span class="hljs-comment line-number">254.</span>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> options) {
</div><div class="hljs-line"><span class="hljs-comment line-number">255.</span>            <span class="hljs-keyword">if</span> (options.hasOwnProperty(key)) {
</div><div class="hljs-line"><span class="hljs-comment line-number">256.</span>                _default[key] = options[key];
</div><div class="hljs-line"><span class="hljs-comment line-number">257.</span>            }
</div><div class="hljs-line"><span class="hljs-comment line-number">258.</span>        }
</div><div class="hljs-line"><span class="hljs-comment line-number">259.</span>        <span class="hljs-keyword">var</span> curEle = _default.curEle,
</div><div class="hljs-line"><span class="hljs-comment line-number">260.</span>            target = _default.target,
</div><div class="hljs-line"><span class="hljs-comment line-number">261.</span>            duration = _default.duration,
</div><div class="hljs-line"><span class="hljs-comment line-number">262.</span>            effect = _default.effect,
</div><div class="hljs-line"><span class="hljs-comment line-number">263.</span>            callBack = _default.callBack;
</div><div class="hljs-line"><span class="hljs-comment line-number">264.</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">265.</span>        <span class="hljs-comment">//=&gt;prepare T/B/C/D</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">266.</span>        <span class="hljs-keyword">var</span> time = <span class="hljs-literal">null</span>,
</div><div class="hljs-line"><span class="hljs-comment line-number">267.</span>            begin = {},
</div><div class="hljs-line"><span class="hljs-comment line-number">268.</span>            change = {};
</div><div class="hljs-line"><span class="hljs-comment line-number">269.</span>        <span class="hljs-keyword">for</span> (key <span class="hljs-keyword">in</span> target) {
</div><div class="hljs-line"><span class="hljs-comment line-number">270.</span>            <span class="hljs-keyword">if</span> (target.hasOwnProperty(key)) {
</div><div class="hljs-line"><span class="hljs-comment line-number">271.</span>                begin[key] = utils.css(curEle, key);
</div><div class="hljs-line"><span class="hljs-comment line-number">272.</span>                change[key] = target[key] - begin[key];
</div><div class="hljs-line"><span class="hljs-comment line-number">273.</span>            }
</div><div class="hljs-line"><span class="hljs-comment line-number">274.</span>        }
</div><div class="hljs-line"><span class="hljs-comment line-number">275.</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">276.</span>        <span class="hljs-comment">//=&gt;running</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">277.</span>        clearInterval(curEle.animateTimer);
</div><div class="hljs-line"><span class="hljs-comment line-number">278.</span>        curEle.animateTimer = setInterval(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
</div><div class="hljs-line"><span class="hljs-comment line-number">279.</span>            time += <span class="hljs-number">17</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">280.</span>            <span class="hljs-keyword">if</span> (time &gt;= duration) {
</div><div class="hljs-line"><span class="hljs-comment line-number">281.</span>                utils.css(curEle, target);
</div><div class="hljs-line"><span class="hljs-comment line-number">282.</span>            clearInterval(curEle.animateTimer);
</div><div class="hljs-line"><span class="hljs-comment line-number">283.</span>                <span class="hljs-comment">//=&gt;run callBack</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">284.</span>                <span class="hljs-comment">//typeof callBack === 'function' ? callBack.call(curEle) : null;</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">285.</span>                callBack &amp;&amp; callBack.call(curEle);
</div><div class="hljs-line"><span class="hljs-comment line-number">286.</span>                <span class="hljs-keyword">return</span>;
</div><div class="hljs-line"><span class="hljs-comment line-number">287.</span>            }
</div><div class="hljs-line"><span class="hljs-comment line-number">288.</span>            <span class="hljs-keyword">var</span> curPos = {};
</div><div class="hljs-line"><span class="hljs-comment line-number">289.</span>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> target) {
</div><div class="hljs-line"><span class="hljs-comment line-number">290.</span>                <span class="hljs-keyword">if</span> (target.hasOwnProperty(key)) {
</div><div class="hljs-line"><span class="hljs-comment line-number">291.</span>                    curPos[key] = effect(time, begin[key], change[key], duration);
</div><div class="hljs-line"><span class="hljs-comment line-number">292.</span>                }
</div><div class="hljs-line"><span class="hljs-comment line-number">293.</span>            }
</div><div class="hljs-line"><span class="hljs-comment line-number">294.</span>            utils.css(curEle, curPos);
</div><div class="hljs-line"><span class="hljs-comment line-number">295.</span>        }, <span class="hljs-number">17</span>);
</div><div class="hljs-line"><span class="hljs-comment line-number">296.</span>    }
</div><div class="hljs-line"><span class="hljs-comment line-number">297.</span>
</div><div class="hljs-line"><span class="hljs-comment line-number">298.</span>    <span class="hljs-comment">/*
</span></div><div class="hljs-line"><span class="hljs-comment line-number">299.</span>     * 参数使用OPTIONS对象处理的好处:
</div><div class="hljs-line"><span class="hljs-comment line-number">300.</span>     *  1、不用考虑顺序的问题了，只要传递的时候在对象中指定好内容即可，也就是哪一个属性传递哪一个值即可
</div><div class="hljs-line"><span class="hljs-comment line-number">301.</span>     *  2、对于不传递的我们完全可以在函数中给做一些默认值，把传递的值覆盖默认的，没传递的使用默认值即可
</div><div class="hljs-line"><span class="hljs-comment line-number">302.</span>     *  =&gt;当我们封装的方法需要支持传递很多参数，并且有些可以传递也可以不传递（不传递的都给默认值），再并且后期可能还会扩展更多的参数传递，这些情况下，兄弟就不要多想了，直接上OPTIONS
</div><div class="hljs-line"><span class="hljs-comment line-number">303.</span>     */
</div><div class="hljs-line"><span class="hljs-comment line-number">304.</span>}();
</div></code></pre></div></body></html>